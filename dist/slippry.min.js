/**
 * slippry v0.96 - Simple responsive content slider
 * http://slippry.com
 *
 * Author(s): Lukas Jakob Hafner - @saftsaak 
 *
 * Copyright 2013, booncon oy - http://booncon.com
 *
 * Thanks @ http://bxslider.com for the inspiration!
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
 (function($){"use strict";var f;f={slippryWrapper:'<div class="slippry_box" />',slideWrapper:'<div class="slide_box" />',boxClass:'slippry_list',elements:'li',activeClass:'active',fillerClass:'filler',loadingClass:'loading',adaptHeight:true,start:1,loop:true,captions:'overlay',captionsClass:'caption',initSingle:true,responsive:true,usePager:true,pagerClass:'pager',useControls:true,controlClass:'controls',prevClass:'slip_prev',prevText:'Previous',nextClass:'slip_next',nextText:'Next',hideOnEnd:true,transition:'horizontal',kenZoom:1.4,slideMargin:0,transClass:'transition',transTime:1200,transEase:'swing',continuous:true,useCSS:true,auto:true,autoDirection:'next',autoHover:true,autoHoverDelay:100,autoDelay:500,pause:3000,onSliderLoad:function(){return this},onSlideBefore:function(){return this},onSlideAfter:function(){return this}};$.fn.slippry=function(d){var e,el,refresh,prepareFiller,setFillerProportions,init,updateCaption,initPager,initControls,ready,initCaptions,updatePager,doTransition,updateSlide,updateControls,updatePos,supports,preload,start;el=this;if(el.length===0){return this}if(el.length>1){el.each(function(){$(this).slippry(d)});return this}e={};e.vars={};supports=(function(){var c=document.createElement('div'),vendors=['Khtml','Ms','O','Moz','Webkit'],len=vendors.length;return function(b){if(b in c.style){return true}b=b.replace(/^[a-z]/,function(a){return a.toUpperCase()});while(len--){if(vendors[len]+b in c.style){return true}}return false}}());ready=function(){if(e.vars.fresh){e.vars.slippryWrapper.removeClass(e.settings.loadingClass);e.vars.fresh=false;if(e.settings.auto){el.startAuto()}e.settings.onSliderLoad.call()}else{$('.'+e.settings.fillerClass,e.vars.slideWrapper).addClass('ready')}e.settings.onSlideAfter.call(e.vars.active)};setFillerProportions=function(a){var b,height,ratio,p_top,$filler;b=a.width();height=a.height();ratio=b/height;p_top=1/ratio*100+'%';$filler=$('.'+e.settings.fillerClass,e.vars.slideWrapper);$filler.css({paddingTop:p_top});ready()};prepareFiller=function(){if($('.'+e.settings.fillerClass,e.vars.slideWrapper).length===0){e.vars.slideWrapper.append($('<div class="'+e.settings.fillerClass+'" />'))}if(e.settings.adaptHeight===true){setFillerProportions($('.'+e.settings.activeClass,el))}else{var a,$highest,height,count,loop;a=$(e.settings.elements,el);height=0;loop=0;count=a.length;$(a).each(function(){if($(this).height()>height){$highest=$(this);height=$highest.height()}loop=loop+1;if(loop===count){if($highest===undefined){$highest=$($(a)[0])}setFillerProportions($highest)}})}};updatePager=function(){if(e.settings.usePager){$('.pager li',e.vars.slippryWrapper).removeClass('active');$($('.pager li',e.vars.slippryWrapper)[e.vars.active.index()]).addClass(e.settings.activeClass)}};updateControls=function(){if(!e.settings.loop&&e.settings.hideOnEnd){$('.'+e.settings.prevClass,e.vars.slippryWrapper)[e.vars.first?'hide':'show']();$('.'+e.settings.nextClass,e.vars.slippryWrapper)[e.vars.last?'hide':'show']()}};updateCaption=function(){var a,wrapper;if(e.settings.captions!==false){a=e.vars.active.attr('title');if(e.settings.captions!=='custom'){wrapper=$('.'+e.settings.captionsClass,e.vars.slippryWrapper)}else{wrapper=$('.'+e.settings.captionsClass)}wrapper.html(a).show();if(a===undefined){wrapper.hide()}}};el.startAuto=function(){if((e.vars.timer===undefined)&&(e.vars.delay===undefined)){e.vars.delay=window.setTimeout(function(){e.vars.autodelay=false;e.vars.timer=window.setInterval(function(){el.goToSlide(e.settings.autoDirection)},e.settings.pause)},e.vars.autodelay?e.settings.autoHoverDelay:e.settings.autoDelay)}if(e.settings.autoHover){e.vars.slideWrapper.unbind('mouseenter').unbind('mouseleave').bind('mouseenter',function(){if(e.vars.timer!==undefined){e.vars.hoverStop=true;el.stopAuto()}else{e.vars.hoverStop=false}}).bind('mouseleave',function(){if(e.vars.hoverStop){e.vars.autodelay=true;el.startAuto()}})}};el.stopAuto=function(){window.clearInterval(e.vars.timer);e.vars.timer=undefined;window.clearTimeout(e.vars.delay);e.vars.delay=undefined};refresh=function(){$(e.settings.elements,el).removeClass(e.settings.activeClass);e.vars.active.addClass(e.settings.activeClass);if(e.settings.responsive){prepareFiller()}else{ready()}updateControls();updatePager();updateCaption()};updateSlide=function(){refresh()};doTransition=function(){var a,jump,old_left,old_pos,kenZoom,kenStart,kenX,kenY,animProp,cssProp;e.settings.onSlideBefore.call(e.vars.active);if(e.settings.transition!==false){e.vars.moving=true;if(e.settings.transition==='kenburns'){if(!e.settings.useCSS){animProp={};cssProp={};e.vars.active.css({top:'auto',left:'auto',bottom:'auto',right:'auto'});kenX=e.vars.active.index()%2===0?'left':'right';kenY=e.vars.active.index()%2===0?'top':'bottom';kenZoom=100*e.settings.kenZoom;kenStart=100-kenZoom;cssProp[kenX]=kenStart+'%';cssProp[kenY]=kenStart+'%';cssProp.width=kenZoom+'%';animProp[kenX]='0%';animProp[kenY]='0%';e.vars.active.css(cssProp).animate(animProp,{duration:e.settings.pause+(e.settings.transTime*2),queue:false})}if(e.vars.fresh){$($(e.settings.elements,el)).css('opacity',0);e.vars.active.css('opacity',1).addClass('ken');e.vars.moving=false}else{if(e.settings.useCSS){e.vars.old.addClass(e.settings.transClass).css('opacity',0);e.vars.active.addClass(e.settings.transClass).css('opacity',1).addClass('ken');e.vars.old.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',function(){console.log('anim_end');e.vars.old.removeClass(e.settings.transClass).removeClass('ken');e.vars.active.removeClass(e.settings.transClass);e.vars.moving=false;return this})}else{e.vars.old.addClass(e.settings.transClass).animate({opacity:0},{duration:e.settings.transTime,queue:false,easing:e.settings.transEase,complete:function(){$(this).removeClass(e.settings.transClass);e.vars.moving=false}});e.vars.active.addClass(e.settings.transClass).css('opacity',0).animate({opacity:1},{duration:e.settings.transTime,queue:false,easing:e.settings.transEase,complete:function(){$(this).removeClass(e.settings.transClass)}})}}updateSlide()}else if(e.settings.transition==='fade'){if(e.vars.fresh){$($(e.settings.elements,el)).css('opacity',0);e.vars.active.css('opacity',1);e.vars.moving=false}else{if(e.settings.useCSS){e.vars.old.addClass(e.settings.transClass).css('opacity',0);e.vars.active.addClass(e.settings.transClass).css('opacity',1);e.vars.old.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',function(){e.vars.old.removeClass(e.settings.transClass);e.vars.active.removeClass(e.settings.transClass);e.vars.moving=false;return this})}else{e.vars.old.addClass(e.settings.transClass).stop().animate({opacity:0},e.settings.transTime,e.settings.transEase,function(){$(this).removeClass(e.settings.transClass);e.vars.moving=false});e.vars.active.addClass(e.settings.transClass).css('opacity',0).stop().animate({opacity:1},e.settings.transTime,e.settings.transEase,function(){$(this).removeClass(e.settings.transClass)})}}updateSlide()}else if(e.settings.transition==='horizontal'){a='-'+e.vars.active.index()*(100+e.settings.slideMargin)+'%';if(e.vars.fresh){el.css('left',a);e.vars.moving=false}else{if(e.settings.continuous){if(e.vars.jump&&(e.vars.trigger!=='pager')){jump=true;old_pos=a;if(e.vars.first){old_left=0;e.vars.active.css('left',e.vars.count*(100+e.settings.slideMargin)+'%');a='-'+e.vars.count*(100+e.settings.slideMargin)+'%'}else{old_left=(e.vars.count-1)*(100+e.settings.slideMargin)+'%';e.vars.active.css('left',-(100+e.settings.slideMargin)+'%');a=(100+e.settings.slideMargin)+'%'}}}e.vars.active.addClass(e.settings.transClass);if(e.settings.useCSS){el.addClass(e.settings.transition);el.css('left',a);el.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',function(){el.removeClass(e.settings.transition);if(jump){e.vars.active.css('left',old_left);el.css('left',old_pos)}e.vars.moving=false;return this})}else{el.stop().animate({left:a},e.settings.transTime,e.settings.transEase,function(){if(jump){e.vars.active.css('left',old_left);el.css('left',old_pos)}e.vars.moving=false;return this})}}updateSlide()}}else{updateSlide()}};updatePos=function(a){e.vars.first=false;e.vars.last=false;if((a==='prev')||(a===0)){e.vars.first=true}else if((a==='next')||(a===e.vars.count-1)){e.vars.last=true}};el.goToSlide=function(a){var b;if(!e.vars.moving){b=e.vars.active.index();if(a==='prev'){if(b>0){a=b-1}else if(e.settings.loop){a=e.vars.count-1}}else if(a==='next'){if(b<e.vars.count-1){a=b+1}else if(e.settings.loop){a=0}}else{a=a-1}e.vars.jump=false;if((a!=='prev')&&(a!=='next')){updatePos(a);e.vars.old=e.vars.active;e.vars.active=$($(e.settings.elements,el)[a]);if(((b===0)&&(a===e.vars.count-1))||((b===e.vars.count-1)&&(a===0))){e.vars.jump=true}doTransition()}}};el.goToNextSlide=function(){el.goToSlide('next')};el.goToPrevSlide=function(){el.goToSlide('prev')};initPager=function(){if((e.settings.usePager)&&(e.vars.count>1)){var a,loop,pager;a=$(e.settings.elements,el).length;pager=$('<ul class="'+e.settings.pagerClass+'" />');for(loop=1;loop<a+1;loop=loop+1){pager.append($('<li />').append($('<a href="#'+loop+'">'+(loop+1)+'</a>')))}e.vars.slippryWrapper.append(pager);$('.'+e.settings.pagerClass+' a',e.vars.slippryWrapper).click(function(){e.vars.trigger='pager';el.goToSlide(parseInt(this.hash.split('#')[1],10));return false});updatePager()}};initControls=function(){if((e.settings.useControls)&&(e.vars.count>1)){e.vars.slideWrapper.append($('<ul class="'+e.settings.controlClass+'" />').append('<li class="'+e.settings.prevClass+'"><a href="#prev">'+e.settings.prevText+'</a></li>').append('<li class="'+e.settings.nextClass+'"><a href="#next">'+e.settings.nextText+'</a></li>'));$('.'+e.settings.controlClass+' a',e.vars.slippryWrapper).click(function(){console.log('click: '+e.vars.moving);e.vars.trigger='controls';el.goToSlide(this.hash.split('#')[1]);return false});updateControls()}};initCaptions=function(){if(e.settings.captions!==false){if(e.settings.captions==='overlay'){e.vars.slideWrapper.append('<div class="caption_wrap"><div class="'+e.settings.captionsClass+'"></div></div>')}else if(e.settings.captions==='below'){e.vars.slippryWrapper.append('<div class="'+e.settings.captionsClass+'" />')}}};start=function(){el.goToSlide(e.vars.active.index())};preload=function(a){var b,loop,elements;elements=$('img, iframe',a);b=elements.length;if(b===0){start();return}loop=0;elements.each(function(){$(this).one('load',function(){if(++loop===b){start()}}).each(function(){if(this.complete){$(this).load()}})})};el.getCurrentSlide=function(){return e.vars.active};el.getSlideCount=function(){return e.vars.count};el.destroySlider=function(){if(e.vars.fresh===false){el.stopAuto();e.vars.moving=false;$(e.settings.elements,el).each(function(){if($(this).data("cssBckup")!==undefined){$(this).attr("style",$(this).data("cssBckup"))}else{$(this).removeAttr('style')}if($(this).data("classBckup")!==undefined){$(this).attr("class",$(this).data("classBckup"))}else{$(this).removeAttr('class')}});if(el.data("cssBckup")!==undefined){el.attr("style",el.data("cssBckup"))}else{el.removeAttr('style')}if(el.data("classBckup")!==undefined){el.attr("class",el.data("classBckup"))}else{el.removeAttr('class')}e.vars.slippryWrapper.before(el);e.vars.slippryWrapper.remove();e.vars.fresh=undefined}};el.reloadSlider=function(){el.destroySlider();init()};init=function(){var a;e.settings=$.extend({},f,d);e.vars.count=$(e.settings.elements,el).length;if(e.settings.useCSS){if(!supports('transition')){e.settings.useCSS=false}}el.data('cssBckup',el.attr('style'));el.data('classBackup',el.attr('class'));el.addClass(e.settings.boxClass).wrap(e.settings.slippryWrapper).wrap(e.settings.slideWrapper);e.vars.slideWrapper=el.parent();e.vars.slippryWrapper=e.vars.slideWrapper.parent().addClass(e.settings.loadingClass);e.vars.fresh=true;$(e.settings.elements,el).each(function(){$(this).data('cssBckup',$(this).attr('style')).data('classBackup',$(this).attr('class')).addClass(e.settings.transition);if(e.settings.useCSS){$(this).addClass('useCSS')}if(e.settings.transition==='horizontal'){$(this).css('left',$(this).index()*(100+e.settings.slideMargin)+'%')}});if((e.vars.count>1)||(e.settings.initSingle)){if($('.'+e.settings.activeClass,el).index()===-1){if(e.settings.start==='random'){a=Math.round(Math.random()*(e.vars.count-1))}else if(e.settings.start>0&&e.settings.start<e.vars.count){a=e.settings.start}else{a=0}$($(e.settings.elements,el)[a]).addClass(e.settings.activeClass);e.vars.active=$($(e.settings.elements,el)[a])}else{e.vars.active=$('.'+e.settings.activeClass,el)}initControls();initPager();initCaptions();preload($(e.settings.elements,el))}else{return this}};init();return this}}(jQuery));